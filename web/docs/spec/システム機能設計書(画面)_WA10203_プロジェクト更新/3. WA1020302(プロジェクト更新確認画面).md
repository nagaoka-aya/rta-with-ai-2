# プロジェクト更新確認画面

| 項目 | 内容 |
| --- | --- |
| PJ名 | サンプルプロジェクト |
| 成果物名 | システム機能設計書（画面） |
| 作成 | TIS |
| 作成日 | 2020/03/05 |
| システム名 | サンプルシステム |
| 変更 | TIS |
| 変更日 | 2022/12/13 |
| サブシステム名 | プロジェクト管理システム |

## 3. WA1020302(プロジェクト更新確認画面)

### 3.1. 画面レイアウト

### 3.2. 一覧表示

| No. | 領域名 | ページング有無 | ソート条件 | 備考 |
| --- | --- | --- | --- | --- |
| 1 | - | - | - | - |

### 3.3. 画面項目定義

| No. | 表示情報 | | | | | ドメイン名 | 画面項目名（物理） |
| --- | --- | --- | --- | --- | --- | --- | --- |
| | **画面項目名** | **画面項目種別** | **情報取得元** | **編集仕様** | **初期値** | **必須** | |

**領域名：プロジェクト情報入力**

| No. | 画面項目名 | 画面項目種別 | 情報取得元 | 編集仕様 | 初期値 | 必須 | ドメイン名 | 画面項目名（物理） |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | 事業部 | label | - | 組織IDに対する組織名 | - | ○ | 組織ID | - |
| 2 | 部門 | label | - | 組織IDに対する組織名 | - | ○ | 組織ID | - |
| 3 | PJ名 | label | - | - | - | ○ | プロジェクト名 | - |
| 4 | PJ種別 | label | - | PJ種別コードに対するPJ種別名 | - | ○ | プロジェクト種別 | - |
| 5 | PJ分類 | label | - | PJ分類コードに対するPJ分類名 | - | ○ | プロジェクト分類 | - |
| 6 | 売上高(千円) | label | - | ＜表示変換:10進数変換＞ | - | - | 金額 | - |
| 7 | 顧客 | label | - | 顧客IDに対する顧客名 | - | ○ | 顧客名 | - |
| 8 | PM | label | - | - | - | ○ | ユーザ氏名（漢字） | - |
| 9 | PL | label | - | - | - | ○ | ユーザ氏名（漢字） | - |
| 10 | 開始日 | label | - | ＜表示変換:日付変換＞ | - | ○ | 日付 | - |
| 11 | 終了日 | label | - | ＜表示変換:日付変換＞ | - | ○ | 日付 | - |
| 12 | 備考 | label | - | 改行が含まれる場合は改行を再現すること。 | - | - | 備考 | - |
| 13 | プロジェクトID | hidden | - | - | - | ○ | プロジェクトID | - |
| 14 | 事業部 | hidden | - | - | - | ○ | 組織ID | divisionId |
| 15 | 部門 | hidden | - | - | - | ○ | 組織ID | organizationId |
| 16 | PJ名 | hidden | - | - | - | ○ | プロジェクト名 | projectName |
| 17 | PJ種別 | hidden | - | - | - | ○ | プロジェクト種別 | projectType |
| 18 | PJ分類 | hidden | - | - | - | ○ | プロジェクト分類 | projectClass |

| No. | 画面項目名 | 画面項目種別 | 情報取得元 | 編集仕様 | 初期値 | 必須 | ドメイン名 | 画面項目名（物理） |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 19 | 売上高(千円) | hidden | - | - | - | - | 金額 | sales |
| 20 | 顧客 | hidden | - | - | - | ○ | 顧客ID | clientId |
| 21 | PM | hidden | - | - | - | ○ | ユーザ氏名（漢字） | projectManager |
| 22 | PL | hidden | - | - | - | ○ | ユーザ氏名（漢字） | projectLeader |
| 23 | 開始日 | hidden | - | - | - | ○ | 日付 | projectStartDate |
| 24 | 終了日 | hidden | - | - | - | ○ | 日付 | projectEndDate |
| 25 | 備考 | hidden | - | - | - | - | 備考 | note |
| 26 | バージョン番号 | hidden | - | - | - | ○ | バージョン番号 | versionNo |

### 3.4. 入出力一覧

| No. | 入出力名 | 種別 | I/O | DBアクセス種別 | | | | | | 備考 |
| --- | --- | --- | --- | C | R | U | D | ﾛｯｸ対象 | |
| 1 | プロジェクト | テーブル | O | - | - | ○ | - | - | - |
| 2 | 組織 | テーブル | I | - | ○ | - | - | - | - |

### 3.5. 画面イベント一覧

| No. | 画面イベント名 | 発生タイミング | 画面イベント概要 | 正常時遷移先画面 | サーバ通信有無 |
| --- | --- | --- | --- | --- | --- |
| 1 | 確定 | 「確定」ボタン押下 | 当画面に表示していた内容をデータベースに登録する。 | プロジェクト更新完了 | あり(同期) |
| 2 | 戻る | 「戻る」ボタン押下 | 当画面に表示していた内容を登録画面に表示する。 | プロジェクト更新 | あり(同期) |

### 3.6. 画面イベント詳細
#### 3.6.1. 確定イベント
##### (1) バリデーション処理

「2. WA1020301(プロジェクト更新画面) > 2.6.5. 確認イベント > (1) バリデーション処理」と同様のバリデーションを行う。

上記バリデーションにおいて一箇所でもエラーが発生した場合、プロジェクト更新画面に指摘内容を表示し、後続の処理は実施しない。

##### (2) DBアクセス（登録、更新処理）

表示内容をデータベースに登録する。登録仕様については下記の通り。

###### プロジェクトテーブル

| No. | 出力項目名 | 出力情報 | | 編集仕様 | 備考 |
| --- | --- | --- | --- | --- | --- |
| | | 情報取得元 | 項目名 | | |
| 1 | プロジェクト名 | プロジェクト更新画面 | PJ名 | - | |
| 2 | プロジェクト種別 | | PJ種別 | - | |
| 3 | プロジェクト分類 | | PJ分類 | - | |

| No. | 出力項目名 | 出力情報 | | 編集仕様 |
| --- | --- | --- | --- | --- |
| 4 | プロジェクト開始日付 | | 開始日 | - |
| 5 | プロジェクト終了日付 | | 終了日 | - |
| 6 | 部門ID | | 部門 | - |
| 7 | 顧客ID | | 顧客 | - |
| 8 | プロジェクトマネージャー | | PM | - |
| 9 | プロジェクトリーダー | | PL | - |
| 10 | 備考 | | 備考 | - |
| 11 | 売上高 | | 売上高 | - |
| 12 | バージョン番号 | - | - | 「1」加算 |

**更新条件**

プロジェクトID = プロジェクトID（入力値）

##### (3) 表示処理

プロジェクト更新完了画面を表示する。画面レイアウト、表示項目については「4. プロジェクト更新完了画面」を参照。

#### 3.6.2. 戻るイベント

##### (1) 表示処理

当画面に表示していた内容をプロジェクト更新画面に表示する。画面レイアウト、表示項目については「2. プロジェクト更新画面」を参照。