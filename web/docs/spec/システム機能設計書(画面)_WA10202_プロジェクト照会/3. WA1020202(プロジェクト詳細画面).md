# WA10202/プロジェクト照会

| 項目 | 内容 | 担当 | 日付 |
|------|------|------|------|
| 作成 | TIS | 2019/12/05 ||
| 変更 | TIS | 2022/12/13 ||

**システム名**: サンプルシステム  
**サブシステム名**: プロジェクト管理システム

## 3. WA1020202(プロジェクト詳細画面)

### 3.1. 画面レイアウト

### 3.2. 一覧表示

| No. | 領域名 | ページング有無 | ソート条件 | 備考 |
|-----|---------|----------------|------------|-------|
| 1 | ‐ | ‐ | ‐ | ‐ |

### 3.3. 画面項目定義

| No. | 表示情報 | 画面項目種別 | 情報取得元 | 編集仕様 | 初期値 | 必須 |
|-----|-----------|--------------|-------------|-----------|---------|-------|
| 1 | 事業部 | label | 組織．組織名 | 組織IDに対する組織名 ※組織マスタに当該組織IDが存在しない場合は空白 | - | - |
| 2 | 部門 | label | 組織．組織名 | 組織IDに対する組織名 ※組織マスタに当該組織IDが存在しない場合は空白 | - | - |
| 3 | PJ名 | label | プロジェクト．プロジェクト名 | - | - | - |
| 4 | PJ種別 | label | プロジェクト．プロジェクト種別 | PJ種別コードに対するPJ種別名 | - | - |
| 5 | PJ分類 | label | プロジェクト．プロジェクト分類 | PJ分類コードに対するPJ分類名 | - | - |
| 6 | 売上高(千円) | label | プロジェクト．売上高 | ＜表示変換:10進数変換＞ 3桁ごとにカンマ区切り | - | - |
| 7 | 顧客 | label | 顧客管理システム．顧客詳細取得API | 顧客IDに対する顧客名 | - | - |
| 8 | PM | label | プロジェクト．プロジェクトマネージャー | - | - | - |
| 9 | PL | label | プロジェクト．プロジェクトリーダー | - | - | - |
| 10 | 開始日 | label | プロジェクト．プロジェクト開始日付 | ＜表示変換:日付変換＞ yyyy/MM/dd | - | - |
| 11 | 終了日 | label | プロジェクト．プロジェクト終了日付 | ＜表示変換:日付変換＞ yyyy/MM/dd | - | - |
| 12 | 備考 | label | プロジェクト．備考 | 改行が含まれる場合は改行を再現すること。 | - | - |

### 3.4. 入出力一覧

| No. | 入出力名 | 種別 | I/O | DBアクセス種別 | 備考 |
|-----|-----------|-------|------|----------------|-------|
| 1 | 組織 | テーブル | I | R | - |
| 2 | プロジェクト | テーブル | I | R | - |

### 3.5. 画面イベント一覧

| No. | 画面イベント名 | 発生タイミング | 画面イベント概要 | 正常時遷移先画面 | サーバ通信有無 |
|-----|----------------|----------------|------------------|------------------|----------------|
| 1 | 初期表示 | ‐ | パラメータとして受け取ったプロジェクトIDに紐づくプロジェクトを検索し、プロジェクト詳細画面を表示する。 | - | あり(同期) |
| 2 | 戻る | 「戻る」ボタン押下 | プロジェクト検索画面を表示する。 | プロジェクト検索画面 | あり(同期) |
| 3 | 更新 | 「更新」ボタン押下 | プロジェクト更新画面を表示する | プロジェクト更新画面 | あり(同期) |

### 3.6. 画面イベント詳細

#### 3.6.1.初期表示イベント

(1) バリデーション処理
- なし。

(2) DBアクセス（検索処理）

(a) プロジェクト検索条件

取得テーブル・カラム情報:

| 取得テーブル名 | 取得カラム名 | 画面項目名 |
|----------------|--------------|------------|
| プロジェクト | プロジェクトID | - |
| | プロジェクト名 | PJ名 |
| | プロジェクト種別 | PJ種別 |
| | プロジェクト分類 | PJ分類 |
| | 売上高 | 売上高 |
| | 顧客ID | - |
| | プロジェクトマネージャー | PM |
| | プロジェクトリーダー | PL |
| | プロジェクト開始日付 | 開始日 |
| | プロジェクト終了日付 | 終了日 |
| | 備考 | 備考 |
| 事業部 | 組織名 | 事業部 |
| 部門 | 組織名 | 部門 |

結合条件:  
プロジェクト  
  LEFT OUTER JOIN 組織 AS 部門  
    ON プロジェクト．組織ID = 部門．組織ID  
  LEFT OUTER JOIN 組織 AS 事業部  
    ON 部門．上位組織ID = 事業部．組織ID

検索条件:  
- プロジェクト．プロジェクトID = プロジェクトID(リクエストパラメータ)

(b) 上記で取得した顧客IDをパラメータとして、顧客管理システム．顧客詳細取得APIを実行し顧客名を取得する。

(3) 表示処理  
(a) 「(2)-(a) プロジェクト検索条件)」の検索結果がない場合
- 汎用エラー画面を表示する。

(b) 「(2)-(a) プロジェクト検索条件)」の検索結果がある場合
- 検索結果を「プロジェクト詳細画面」に表示する。

#### 3.6.2.戻るイベント
- 「2.WA1020201(プロジェクト検索画面)：2.6.画面イベント詳細：2.6.3.一覧検索イベント」を参照。
- 初期表示で受け取ったパラメータをリクエストパラメータとして送信する。

#### 3.6.3.更新イベント
- 「2．WA1020301（プロジェクト更新画面）：2.6.画面イベント詳細：2.6.1.初期表示イベント」を参照。
- 検索画面から受け取ったプロジェクトIDをリクエストパラメータとして送信する。